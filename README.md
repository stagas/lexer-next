<h1 align="center">lexer-next</h1>

<p align="center">
lexer for recursive descent parsers
</p>

<p align="center">
   <a href="#install">        üîß <strong>Install</strong></a>
 ¬∑ <a href="#example">        üß© <strong>Example</strong></a>
 ¬∑ <a href="#api">            üìú <strong>API docs</strong></a>
 ¬∑ <a href="https://github.com/stagas/lexer-next/releases"> üî• <strong>Releases</strong></a>
 ¬∑ <a href="#contribute">     üí™üèº <strong>Contribute</strong></a>
 ¬∑ <a href="https://github.com/stagas/lexer-next/issues">   üñêÔ∏è <strong>Help</strong></a>
</p>

***

## Install

```sh
$ npm i lexer-next
```

## What's this?

It is a lexer generator for writing [Recursive descent parsers](https://en.wikipedia.org/wiki/Recursive_descent_parser) and is compatible with RegExp's **named group** matches as returned, for example, by [`String.prototype.matchAll()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/matchAll).

## Example

```ts
import { createLexer } from 'lexer-next'

const tokenize = (input: string) =>
  input.matchAll(/(?<ident>[a-z]+)|(?<number>[0-9]+)/g)

const lexer = createLexer(tokenize)

const { advance, peek, accept, expect } = lexer('hello 1337 world')

console.log(advance())
// => { group: 'ident', value: 'hello', index: 0 }

console.log(accept('ident'))
// => undefined

console.log(accept('number'))
// => { group: 'number', value: '1337', index: 6 }

console.log(peek())
// => { group: 'ident', value: 'world', index: 11 }

console.log(expect('number'))
// => SyntaxError: Unexpected token: world
//       expected: number
//   but received: ident "world"
//    at position: 11
```

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

#### Table of Contents

*   [ErrorHandler](#errorhandler)
    *   [Parameters](#parameters)
*   [FilterFunction](#filterfunction)
    *   [Parameters](#parameters-1)
*   [Lexer](#lexer)
    *   [advance](#advance)
    *   [peek](#peek)
    *   [accept](#accept)
    *   [expect](#expect)
    *   [onerror](#onerror)
    *   [filter](#filter)
*   [LexerFactory](#lexerfactory)
*   [createLexer](#createlexer)
    *   [Parameters](#parameters-7)

### ErrorHandler

[src/index.ts:12-12](https://github.com/stagas/lexer-next/blob/7b632b39c85257546bbcf6f86579f436aa4b9592/src/index.ts#L7-L11 "Source code on GitHub")

Error handler.

Type: function (error: [Error](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Error)): void

#### Parameters

*   `error`  The error object

### FilterFunction

[src/index.ts:20-20](https://github.com/stagas/lexer-next/blob/7b632b39c85257546bbcf6f86579f436aa4b9592/src/index.ts#L14-L19 "Source code on GitHub")

Filter function.

Type: function (token: Token): [boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)

#### Parameters

*   `token`  The token to match.

Returns **any** `true` if it passes or `false` if it's rejected

### Lexer

[src/index.ts:47-89](https://github.com/stagas/lexer-next/blob/7b632b39c85257546bbcf6f86579f436aa4b9592/src/index.ts#L47-L89 "Source code on GitHub")

Lexer interface.

#### advance

[src/index.ts:51-51](https://github.com/stagas/lexer-next/blob/7b632b39c85257546bbcf6f86579f436aa4b9592/src/index.ts#L51-L51 "Source code on GitHub")

Returns token under current position and advances.

Returns **Token**&#x20;

#### peek

[src/index.ts:60-60](https://github.com/stagas/lexer-next/blob/7b632b39c85257546bbcf6f86579f436aa4b9592/src/index.ts#L60-L60 "Source code on GitHub")

Returns token under current position.
When passed a `group` and maybe a `value` it will only return
the token if they match, otherwise will return `null`.

##### Parameters

*   `group`  The group name to examine
*   `value`  The value to match

Returns **Token**&#x20;

#### accept

[src/index.ts:70-70](https://github.com/stagas/lexer-next/blob/7b632b39c85257546bbcf6f86579f436aa4b9592/src/index.ts#L70-L70 "Source code on GitHub")

Advances position only when current `token.group` matches `group`,
and optionally when `token.value` matches `value`,
otherwise does nothing.

##### Parameters

*   `group` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** The group name to examine
*   `value` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)?** The value to match

Returns **(Token | null)**&#x20;

#### expect

[src/index.ts:78-78](https://github.com/stagas/lexer-next/blob/7b632b39c85257546bbcf6f86579f436aa4b9592/src/index.ts#L78-L78 "Source code on GitHub")

Same as accept() except it throws when `token.group` does not match `group`,
or (optionally) when `token.value` does not match `value`,

##### Parameters

*   `group` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** The group name to examine
*   `value` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)?** The value to match

Returns **Token**&#x20;

#### onerror

[src/index.ts:83-83](https://github.com/stagas/lexer-next/blob/7b632b39c85257546bbcf6f86579f436aa4b9592/src/index.ts#L83-L83 "Source code on GitHub")

Sets a function to handle errors. The error handler accepts an [Error](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Error) object.

##### Parameters

*   `fn` **[ErrorHandler](#errorhandler)**&#x20;

Returns **void**&#x20;

#### filter

[src/index.ts:88-88](https://github.com/stagas/lexer-next/blob/7b632b39c85257546bbcf6f86579f436aa4b9592/src/index.ts#L88-L88 "Source code on GitHub")

Sets a filter function. The filter function receives a [Token](Token) as first parameter.

##### Parameters

*   `fn` **[FilterFunction](#filterfunction)**&#x20;

Returns **void**&#x20;

### LexerFactory

[src/index.ts:94-94](https://github.com/stagas/lexer-next/blob/7b632b39c85257546bbcf6f86579f436aa4b9592/src/index.ts#L91-L93 "Source code on GitHub")

Generate a [Lexer](#lexer) for given input string.

Type: function (input: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)): [Lexer](#lexer)

### createLexer

[src/index.ts:105-177](https://github.com/stagas/lexer-next/blob/7b632b39c85257546bbcf6f86579f436aa4b9592/src/index.ts#L105-L177 "Source code on GitHub")

Create a [LexerFactory](#lexerfactory) with the given [Tokenizer](Tokenizer).

It can be anything that, when called with an `input` string, returns an interface that conforms to
the `IterableIterator<RegExpMatchArray>` type as is returned, for example,
by [`String.prototype.matchAll(regexp)`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/matchAll)

#### Parameters

*   `tokenize` **Tokenizer** A tokenizer Iterable factory.

## Contribute

[Fork](https://github.com/stagas/lexer-next/fork) or
[edit](https://github.dev/stagas/lexer-next) and submit a PR.

All contributions are welcome!

## License

MIT ¬© 2021
[stagas](https://github.com/stagas)
