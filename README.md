<h1 align="center">lexer-next</h1>

<p align="center">
lexer for recursive descent parsers
</p>

<p align="center">
   <a href="#install">        üîß <strong>Install</strong></a>
 ¬∑ <a href="#example">        üß© <strong>Example</strong></a>
 ¬∑ <a href="#api">            üìú <strong>API docs</strong></a>
 ¬∑ <a href="https://github.com/stagas/lexer-next/releases"> üî• <strong>Releases</strong></a>
 ¬∑ <a href="#contribute">     üí™üèº <strong>Contribute</strong></a>
 ¬∑ <a href="https://github.com/stagas/lexer-next/issues">   üñêÔ∏è <strong>Help</strong></a>
</p>

***

## Install

```sh
$ npm i lexer-next
```

## What's this?

It is a lexer generator for writing [Recursive descent parsers](https://en.wikipedia.org/wiki/Recursive_descent_parser) and is compatible with RegExp's **named group** matches as returned, for example, by [`String.prototype.matchAll()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/matchAll).

## Example

```ts
import { createLexer } from 'lexer-next'

const tokenize = (input: string) =>
  input.matchAll(/(?<ident>[a-z]+)|(?<number>[0-9]+)/g)

const lexer = createLexer(tokenize)

const { advance, peek, accept, expect } = lexer('hello 1337 world')

console.log(advance())
// => { group: 'ident', value: 'hello', index: 0 }

console.log(accept('ident'))
// => undefined

console.log(accept('number'))
// => { group: 'number', value: '1337', index: 6 }

console.log(peek())
// => { group: 'ident', value: 'world', index: 11 }

console.log(expect('number'))
// => SyntaxError: Unexpected token: world
//       expected: number
//   but received: ident "world"
//    at position: 11
```

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

#### Table of Contents

*   [createLexer](#createlexer)
    *   [Parameters](#parameters)
*   [Lexer](#lexer)
    *   [advance](#advance)
    *   [peek](#peek)
    *   [accept](#accept)
        *   [Parameters](#parameters-1)
    *   [expect](#expect)
        *   [Parameters](#parameters-2)
    *   [onerror](#onerror)
    *   [filter](#filter)
*   [LexerFactory](#lexerfactory)
*   [ErrorHandler](#errorhandler)
    *   [Parameters](#parameters-3)
*   [FilterFunction](#filterfunction)
    *   [Parameters](#parameters-4)

### createLexer

[src/index.ts:96-171](https://github.com/stagas/lexer-next/blob/2c2d06bcf83bc9d0c403de9204c2513845642624/src/index.ts#L96-L171 "Source code on GitHub")

Create a [LexerFactory](#lexerfactory) with the given [LexerTokenizer](LexerTokenizer).

It can be anything that, when called with an `input` string, returns an interface that conforms to
the `IterableIterator<RegExpMatchArray>` type as is returned, for example,
by [`String.prototype.matchAll(regexp)`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/matchAll)

#### Parameters

*   `tokenize` **LexerTokenizer** A tokenizer Iterable factory.

### Lexer

[src/index.ts:43-80](https://github.com/stagas/lexer-next/blob/2c2d06bcf83bc9d0c403de9204c2513845642624/src/index.ts#L43-L80 "Source code on GitHub")

Lexer interface.

#### advance

[src/index.ts:47-47](https://github.com/stagas/lexer-next/blob/2c2d06bcf83bc9d0c403de9204c2513845642624/src/index.ts#L47-L47 "Source code on GitHub")

Returns token under current position and advances.

Type: function (): TokenReturn

#### peek

[src/index.ts:51-51](https://github.com/stagas/lexer-next/blob/2c2d06bcf83bc9d0c403de9204c2513845642624/src/index.ts#L51-L51 "Source code on GitHub")

Returns token under current position.

Type: function (): TokenReturn

#### accept

[src/index.ts:60-60](https://github.com/stagas/lexer-next/blob/2c2d06bcf83bc9d0c403de9204c2513845642624/src/index.ts#L60-L60 "Source code on GitHub")

Advances position only when current `token.group` matches `group`,
and optionally when `token.value` matches `value`,
otherwise does nothing.

Type: function (group: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String), value: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)): TokenReturn

##### Parameters

*   `group`  The group name to examine
*   `value`  The value to match

#### expect

[src/index.ts:68-68](https://github.com/stagas/lexer-next/blob/2c2d06bcf83bc9d0c403de9204c2513845642624/src/index.ts#L68-L68 "Source code on GitHub")

Same as accept() except it throws when `token.group` does not match `group`,
or (optionally) when `token.value` does not match `value`,

Type: function (group: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String), value: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)): TokenReturn

##### Parameters

*   `group`  The group name to examine
*   `value`  The value to match

#### onerror

[src/index.ts:74-74](https://github.com/stagas/lexer-next/blob/2c2d06bcf83bc9d0c403de9204c2513845642624/src/index.ts#L74-L74 "Source code on GitHub")

Sets a function to handle errors. The error handler accepts
an [Error](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Error) object.

Type: function (fn: [ErrorHandler](#errorhandler)): void

#### filter

[src/index.ts:79-79](https://github.com/stagas/lexer-next/blob/2c2d06bcf83bc9d0c403de9204c2513845642624/src/index.ts#L79-L79 "Source code on GitHub")

Sets a filter function. The filter function accepts a [TokenReturn](TokenReturn).

Type: function (fn: [FilterFunction](#filterfunction)): void

### LexerFactory

[src/index.ts:85-85](https://github.com/stagas/lexer-next/blob/2c2d06bcf83bc9d0c403de9204c2513845642624/src/index.ts#L82-L84 "Source code on GitHub")

Generate a [Lexer](#lexer) for given input string.

Type: function (input: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)): [Lexer](#lexer)

### ErrorHandler

[src/index.ts:8-8](https://github.com/stagas/lexer-next/blob/2c2d06bcf83bc9d0c403de9204c2513845642624/src/index.ts#L3-L7 "Source code on GitHub")

Error handler.

Type: function (error: [Error](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Error)): void

#### Parameters

*   `error`  The error object

### FilterFunction

[src/index.ts:16-16](https://github.com/stagas/lexer-next/blob/2c2d06bcf83bc9d0c403de9204c2513845642624/src/index.ts#L10-L15 "Source code on GitHub")

Filter function.

Type: function (token: TokenReturn): [boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)

#### Parameters

*   `token`  The token to match.

Returns **any** `true` if it passes or `false` if it's rejected

## Contribute

[Fork](https://github.com/stagas/lexer-next/fork) or
[edit](https://github.dev/stagas/lexer-next) and submit a PR.

All contributions are welcome!

## License

MIT ¬© 2021
[stagas](https://github.com/stagas)
